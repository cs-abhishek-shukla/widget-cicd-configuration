<!-- Copyright start
  MIT License
  Copyright (c) 2024 Fortinet Inc
  Copyright end -->
<link rel="stylesheet" type="text/css" href="cicdConfiguration-1.1.0/style.css" />
<div class="modal-header">
  <h3 class="modal-title col-md-9">CICD Configuration</h3>
</div>

<wizard on-finish="close()" indicators-position="top" class="cs-wizard ingestion-steps solutionpack-wizard-steps"
  name="solutionpackWizard">
  <wz-step wz-title="Start" wz-order="1" class="ingestion-modal-padding wizard-first-step">
    <div class="full-width wz-step-height padding-bottom-md solutionpack-wizard-modal-body">
      <div class="full-height overflow-auto">
        <div class="display-table fixed-table-layout full-height full-width">
          <div class="full-height display-table-cell vertical-align-middle">
            <div class="col-md-6 display-flex" style="justify-content: center">
              <img class="img-responsive" src="widgets/installed/cicdConfiguration-1.1.0/images/process.png">
            </div>
            <div class="col-md-6 prerequisites-section padding-bottom-25 padding-left-0">
              <div class="font-size-40 line-height-1">CICD Configuration</div><br />
              <div class="padding-right-30 margin-top-sm max-width-450px">
                <p class="font-size-14 margin-bottom-0">This wizard will guide you through the initial configuration
                  steps for getting your FortiSOAR environment ready for CICD. You will define whether this FortiSOAR
                  instance is setup as a development environment for building new content; or the production environment
                  where the reviewed and unit tested changes should be applied. </p><br />
                <p class="font-size-14 margin-bottom-0">The wizard will also help you connect your version control
                  system to FortiSOAR.</p>
              </div>
              <button type="button" class="btn btn-primary btn-sm margin-top-xlg text-transform-none font-size-14"
                data-ng-click="moveNext()" id="solutionpack-next-btn">Let's get started<i
                  class="fa fa-chevron-right margin-left-sm"></i></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </wz-step>
  <wz-step wz-title="Define Environment" wz-order="2" class="ingestion-modal-padding">
    <div class="full-width wz-step-height padding-bottom-md solutionpack-wizard-modal-body">
      <div class="full-height overflow-auto">
        <div class="display-table fixed-table-layout full-height full-width">
          <div class="full-height display-table-cell vertical-align-middle">
            <div class="col-md-6 display-flex" style="justify-content: center">
              <img class="img-responsive step-image"
                src="widgets/installed/cicdConfiguration-1.1.0/images/environment.png">
            </div>
            <div class="col-md-6 prerequisites-section padding-bottom-25 padding-left-0">
              <div class="font-size-40 line-height-1">Define Your Environment</div><br />
              <div class="padding-right-30 margin-top-sm max-width-450px">
                <p class="font-size-14 margin-bottom-0">To see tasks and workflows relevant to the environment, specify
                  whether the current FortiSOAR instance is a Development or a Production environment.</p><br />
                <p class="font-size-14 margin-bottom-0 padding-bottom-8">You may select both if you have a single
                  FortiSOAR environment
                </p>
              </div>
              <div class="cs-select">
                <ui-select name="select_env" id="select_env" on-select="onEnvSelect($item)"
                  on-remove="onEnvRemove($item)" data-ng-model="configuredEnv.selectedEnv.picklist"
                  data-ng-required="true" multiple class="custom-multi-select" append-to-body="false">
                  <ui-select-match placeholder="Select Environment...">{{$item.itemValue}}
                  </ui-select-match>
                  <ui-select-choices repeat="field in picklistField | filter: $select.search | orderBy: 'name'"
                    refresh-delay="200" ng-show="$select.items.length >= 0 ||">
                    <div ng-bind-html="field.itemValue | highlight: $select.search"></div>
                  </ui-select-choices>
                </ui-select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="ingestion-modal-footer">
      <button type="button" class="btn btn-sm btn-second-primary margin-top-lg margin-left-lg"
        id="solutionpack-configure-back-start-btn" data-ng-click="movePrevious()"><i
          class="fa fa-chevron-left margin-right-sm"></i>Back</button>
      <button type="button" class="btn btn-primary pull-right btn-sm margin-top-lg margin-right-lg"
        data-ng-click="moveSourceControlNext()" id="solutionpack-configure-source-control-next-btn"
        data-ng-disabled="processingPicklist===false">Next<i class="fa fa-chevron-right margin-left-sm"></i>
      </button>
    </div>
  </wz-step>
  <wz-step wz-title="Select Source Control" wz-order="3" class="ingestion-modal-padding wz-reviewoptions-step">
    <div class="full-width wz-step-height padding-bottom-md solutionpack-wizard-modal-body">
      <div class="full-height overflow-auto">
        <div class="display-table fixed-table-layout full-height full-width">
          <div class="full-height display-table-cell vertical-align-middle">
            <div class="col-md-6 display-flex" style="justify-content: center">
              <img class="img-responsive step-image"
                src="widgets/installed/cicdConfiguration-1.1.0/images/environment.png">
            </div>
            <div class="col-md-6 prerequisites-section padding-bottom-25 padding-left-0">
              <div class="font-size-40 line-height-1">Define Your Source Control</div><br />
              <div class="padding-right-30 margin-top-sm max-width-450px">
                <p class="font-size-14 margin-bottom-0">Please choose a source control system from the dropdown menu
                  below to proceed with the configuration. Source control is a crucial component for managing versioning
                  and facilitating continuous integration and deployment processes..</p><br />
                <p class="font-size-14 margin-bottom-0 padding-bottom-8">You may select single Source Control system
                </p>
              </div>
              <div class="cs-select">
                <select id="select_source_control" name="select_source_control" data-ng-change="onSourceControlSelect()"
                  data-ng-model="configuredEnv.sourceControl" class="form-control"
                  data-ng-options="field as field.label for field in sourceControls | filter: $select.search | orderBy: 'name' track by field.uuid"
                  aria-invalid="false">
                </select><span class="fa fa-sort-desc"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="ingestion-modal-footer">
      <button type="button" class="btn btn-sm btn-second-primary margin-top-lg margin-left-lg"
        id="solutionpack-configure-back-env-btn" data-ng-click="moveEnvPrevious()"><i
          class="fa fa-chevron-left margin-right-sm"></i>Back</button>
      <button type="button" class="btn btn-primary pull-right btn-sm margin-top-lg margin-right-lg"
        data-ng-click="moveEnvironmentNext()" id="solutionpack-configure-env-next-btn"
        data-ng-disabled="selectedSourceControl===false">Next<i class="fa fa-chevron-right margin-left-sm"></i>
      </button>
    </div>
  </wz-step>
  <wz-step wz-title="Configure Source Control" wz-order="4" class="ingestion-modal-padding">
    <div class="full-width wz-step-height padding-bottom-md solutionpack-wizard-modal-body">
      <div class="font-size-40 line-height-1 text-center">Connect Your Source Control</div><br />
      <div class=" full-height overflow-auto">
        <div class="display-table fixed-table-layout full-height full-width">
          <div class="full-height display-table-cell vertical-align-middle">
            <div class="col-md-6 display-flex" style="justify-content: center">
              <img class="img-responsive padding-top-70 step-image"
                src="widgets/installed/cicdConfiguration-1.1.0/images/versionControl.png">
            </div>
            <div
              class="col-md-6 margin-bottom-65 margin-top-18 margin-top-negative-20 padding-left-0 prerequisites-section">
              <hr>
              <div class="row">
                <div class="col-md-12 col-sm-12">
                  <div class="mp-view-summary">
                    <div class="pull-left margin-left-sm margin-right-sm">
                      <div class="custom-installing-spinner-content muted-50 margin-top-12"
                        data-ng-if="contentDetail.status !== 'Installed'">
                        <div class="custom-installing-spinner-block">
                          <div class="custom-installing-spinner">
                            <i class="icon icon-installing-loader custom-installing-icon fa fa-spin"></i>
                          </div>
                        </div>
                      </div>
                      <span data-ng-show="contentDetail.status === 'Failed'"
                        class="installing-failed-icon margin-top-8">
                        <i class="fa fa-exclamation-triangle fa-3x" aria-hidden="true"></i>
                      </span>
                      <div>
                        <img data-ng-if="contentDetail.iconLarge" src="{{contentDetail.iconLarge}}"
                          alt="{{contentDetail.label || contentDetail.title}}" />
                        <i data-ng-if="!contentDetail.iconLarge"
                          class="mp-tile-icon {{contentDetail.type}}-tile-icon icon icon-{{contentDetail.type}}-card"></i>
                      </div>
                    </div>
                    <div class="pull-left margin-left-md mp-contentDetail-container">
                      <div class="display-flex">
                        <div class="mp-view-title text-overflow" title="{{contentDetail.label || contentDetail.title}}">
                          {{contentDetail.label || contentDetail.title}}
                          <span data-ng-if="contentDetail.vendor_version"
                            class="mp-view-properties font-normal grey-text">v{{contentDetail.vendor_version}}</span>
                        </div>
                        <span class="preview-tag-horizontal top-0"
                          data-ng-if="contentDetail.featuredTags !== null && contentDetail.featuredTags.length > 0"
                          data-ng-style="{'background-color': contentDetail.featuredTags[0].color}"><span
                            class="featured-tag">{{contentDetail.featuredTags[0].tag}}</span></span>
                      </div>
                      <span class="mp-view-properties">
                        <span class="mp-view-properties grey-text">Version</span>
                        <span>{{contentDetail.version}}</span><span
                          data-ng-if="contentDetail.buildNumber">-{{contentDetail.buildNumber}}</span>
                      </span>
                      <p class="mp-view-properties margin-bottom-xsm"><span class="grey-text">Certified:</span>
                        {{contentDetail.certified ? 'Yes':'No' }}</p>
                      <p class="mp-view-properties margin-bottom-sm" data-ng-show="contentDetail.publisher !== ''">
                        <span class="grey-text">Publisher:</span>
                        <span class="mp-view-properties"
                          data-ng-show="(contentDetail.publisher | lowercase) === 'fortinet' || (contentDetail.publisher | lowercase) === 'cybersponse'">Fortinet
                        </span>
                        <span class="mp-view-properties"
                          data-ng-show="(contentDetail.publisher | lowercase) !== 'fortinet' && (contentDetail.publisher | lowercase) !== 'cybersponse'">{{contentDetail.publisher}}
                        </span>
                      </p>
                    </div>
                    <div class="pull-right display-inline-block">
                      <div class="mp-view-properties margin-top-sm">
                        <div class="row">
                          <div class="pull-right margin-right-sm">
                            <div data-ng-show="contentDetail.infoContent.help_online"
                              class="display-inline-block padding-top-xs">
                              <a id="administration-links" data-ng-show="contentDetail.infoContent.help_online"
                                href="{{contentDetail.infoContent.help_online}}"
                                title="Visit for more details about this {{contentDetail.type}}" target="_blank"
                                rel="noopener noreferrer" class="btn btn-default">
                                <i class="icon icon-documentation margin-right-sm"></i>
                                Documentation
                              </a>
                            </div>
                          </div>
                          <div class="clearfix"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="clearfix"></div>
                </div>
              </div>
              <hr>
              <div data-ng-if="selectedConnector"
                class="margin-top-negative-20 margin-top-md padding-left-0 padding-right-0 connector-config-width"
                data-ng-include="'app/settings/connectorConfig.html'">
              </div>
              <div data-ng-show="selectedConnector" class="col-md-12 margin-top-18">
                <button type="button" class="btn btn-primary"
                  data-ng-disabled="!(formHolder.connectorForm.$valid && formHolder.connectorForm.$dirty)"
                  data-ng-click="saveConnector()" id="submit-github-config-add-btn"><i
                    class="icon icon-check margin-right-sm"></i>Save</button>
                <button type="button" class="btn btn-default" data-ng-disabled="processing"
                  data-ng-click="closeConfiguration()" id="cancel-github-config-add-btn"><i
                    class="icon icon-close margin-right-sm"></i>Cancel</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="ingestion-modal-footer">
      <button type="button" class="btn btn-sm btn-second-primary margin-top-lg margin-left-lg"
        id="version-control-back-btn" data-ng-click="movePrevious()"><i
          class="fa fa-chevron-left margin-right-sm"></i>Back</button>
      <button type="button" class="btn btn-default pull-right btn-sm margin-top-lg margin-right-lg text-tranformtion"
        id="skip-source-control-btn" data-ng-disabled="configuredConnector" data-ng-click="moveVersionControlNext()">
        Skip
        <i class="fa fa-chevron-right margin-left-sm"></i></button>
      <button type="button" class="btn btn-primary pull-right btn-sm margin-top-lg margin-right-lg"
        data-ng-disabled="!configuredConnector" data-ng-click="moveVersionControlNext()"
        id="version-control-next-btn">Next<i class="fa fa-chevron-right margin-left-sm"></i>
      </button>
    </div>
  </wz-step>
  <wz-step wz-title="Finish" wz-order="5" class="ingestion-modal-padding wizard-first-step">
    <div class="full-width wz-step-height padding-bottom-md solutionpack-wizard-modal-body">
      <div class="full-height overflow-auto">
        <div class="display-table fixed-table-layout full-height full-width">
          <div class="full-height display-table-cell vertical-align-middle">
            <div class="col-md-6 display-flex" style="justify-content: center">
              <img class="img-responsive" src="widgets/installed/cicdConfiguration-1.1.0/images/finish.png">
            </div>
            <div class="col-md-6 prerequisites-section padding-bottom-25 padding-left-0">
              <div class="font-size-40 line-height-1">CICD Configuration Successfully Completed!!</div><br />
              <div class="padding-right-30 margin-top-sm">
                <p class="font-size-14 margin-bottom-0">All prerequisites have been configured successfully.</p><br />
                <p class="font-size-14 margin-bottom-0">You may now navigate to the <a
                    data-ng-click="close()">'Continuous Delivery'</a> tab in the
                  navigation and start using the solution.</p>
              </div>
              <div class="col-md-12 margin-top-lg padding-left-0">
                <div class="data-ingestion-summary padding-top-lg">
                  <h6 class="font-weight-normal margin-bottom-sm modal-title text-transform-none">Quick Summary</h6>
                  <p><i class="completed icon icon-approval margin-right-md"
                      data-ng-class="{'completed' : configuredEnv.selectedEnv.length !== 0}"></i>
                    <span data-ng-if="configuredEnv.selectedEnv.picklist.length === 2">Current FortiSOAR instance is
                      {{configuredEnv.selectedEnv.picklist[0].itemValue}} and
                      {{configuredEnv.selectedEnv.picklist[1].itemValue}}</span>
                    <span data-ng-if="configuredEnv.selectedEnv.picklist.length === 1">Current FortiSOAR instance is
                      {{configuredEnv.selectedEnv.picklist[0].itemValue}}</span>
                  </p>
                  <p><i class="completed icon icon-approval margin-right-md"
                      data-ng-class="{'completed' : configuredEnv.sourceControl.length !== 0}"></i>Selected Source
                    Control is {{configuredEnv.sourceControl.label}}</p>
                  <p><i class="completed icon icon-approval margin-right-md"></i>
                    <span data-ng-if="isConnectorHealthy">{{configuredEnv.sourceControl.label}} Connector
                      Configured</span>
                    <span data-ng-if="!isConnectorHealthy">{{configuredEnv.sourceControl.label}} Connector is not
                      Configured</span>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="ingestion-modal-footer">
      <button type="button" class="btn btn-sm btn-second-primary margin-top-lg margin-left-lg"
        id="solutionpack-configure-back-btn" data-ng-click="movePrevious()"><i
          class="fa fa-chevron-left margin-right-sm"></i>Back</button>
      <button type="button" class="btn btn-primary pull-right btn-sm margin-top-lg margin-right-lg"
        data-ng-click="close()" id="solutionpack-configure-finish-btn">Finish<i
          class="fa fa-chevron-right margin-left-sm"></i>
      </button>
    </div>
  </wz-step>
</wizard>